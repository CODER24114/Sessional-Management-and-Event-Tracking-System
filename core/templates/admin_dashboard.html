{% extends 'base.html' %}
{% block title %}Admin Dashboard{% endblock %}

{% block extra_style %}
<style>
.dashboard-card {
  background: rgba(255, 255, 255, 0.98);
  border-radius: 28px;
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
  padding: 40px 35px;
  margin-bottom: 30px;
}

/* Stat Cards - Soft Pastel */
.stat-card {
  background: linear-gradient(135deg, #dcd0d0ff 0%, #ebedee 100%);
  color: #333;
  border-radius: 18px;
  padding: 30px 20px;
  text-align: center;
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
  transition: all 0.3s ease;
  cursor: pointer;
}
.stat-card:hover {
  transform: translateY(-6px);
  box-shadow: 0 12px 28px rgba(0, 0, 0, 0.15);
}
.stat-card i { font-size: 3rem; margin-bottom: 15px; }
.stat-card .number { font-size: 3rem; font-weight: 700; margin: 10px 0; }

/* Individual Card Colors */
.stat-card.blue {
  background: linear-gradient(135deg, #cce5ff 0%, #e0f7fa 100%);
  color: #004d61;
}
.stat-card.pink {
  background: linear-gradient(135deg, #ffe4ec 0%, #ffd6e0 100%);
  color: #7c1c37;
}
.stat-card.green {
  background: linear-gradient(135deg, #e0f7e9 0%, #d2f5c8 100%);
  color: #155724;
}

/* Tables */
.table-container {
  background: #fafbfd;
  border-radius: 22px;
  padding: 25px;
  margin-top: 30px;
}
.table {
  background: #fff;
  border-radius: 18px;
  overflow: hidden;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.06);
}
.table thead {
  background: linear-gradient(135deg, #b3e5fc 0%, #a7ffeb 100%);
  color: #004d40;
}
.table tbody tr:hover {
  background: #f1f8ff;
  transform: scale(1.01);
}

/* Headings */
h2 {
  color: #5c6bc0;  /* Soft lavender-blue */
  font-weight: 700;
  margin-bottom: 25px;
  font-size: 2rem;
}
h4 {
  color: #607d8b;
  font-weight: 600;
  margin-bottom: 20px;
  font-size: 1.3rem;
}

/* Buttons and Badges */
.btn-success {
  background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
  border: none;
  color: #333;
}
.btn-info {
  background: linear-gradient(135deg, #cfd9df 0%, #e2ebf0 100%);
  border: none;
  color: #333;
}
.btn-danger {
  background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
  border: none;
  color: #d6bfbfff;
}
</style>
{% endblock %}

{% block content %}
<div class="dashboard-card">
  <h2><i class="bi bi-shield-lock-fill"></i> Admin Dashboard</h2>

  <!-- Statistics Cards -->
  <div class="row g-4 mb-5" style="margin-top: 30px;">
    <div class="col-md-4">
      <div class="stat-card" style="
        background: linear-gradient(135deg, #e3f2fd, #f1f8e9);
        border-radius: 20px;
        padding: 25px;
        text-align: center;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        border: 1px solid #dce4ec;
      " onmouseover="this.style.transform='translateY(-6px)'; this.style.boxShadow='0 10px 20px rgba(0, 0, 0, 0.15)';"
         onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(0, 0, 0, 0.08)';">
        <i class="bi bi-people-fill" style="font-size: 2rem; color: #1565c0; margin-bottom: 10px;"></i>
        <div class="number" style="font-size: 1.8rem; font-weight: 600;">{{ total_users }}</div>
        <div style="font-size: 1.1rem; color: #333;">Total Users</div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="stat-card" style="
        background: linear-gradient(135deg, #fce4ec, #f3e5f5);
        border-radius: 20px;
        padding: 25px;
        text-align: center;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        border: 1px solid #e6d6e9;
      " onmouseover="this.style.transform='translateY(-6px)'; this.style.boxShadow='0 10px 20px rgba(0, 0, 0, 0.15)';"
         onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(0, 0, 0, 0.08)';">
        <i class="bi bi-mortarboard-fill" style="font-size: 2rem; color: #ad1457; margin-bottom: 10px;"></i>
        <div class="number" style="font-size: 1.8rem; font-weight: 600;">{{ total_students }}</div>
        <div style="font-size: 1.1rem; color: #333;">Students</div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="stat-card" style="
        background: linear-gradient(135deg, #e8f5e9, #f1f8e9);
        border-radius: 20px;
        padding: 25px;
        text-align: center;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        border: 1px solid #d8e9d8;
      " onmouseover="this.style.transform='translateY(-6px)'; this.style.boxShadow='0 10px 20px rgba(0, 0, 0, 0.15)';"
         onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(0, 0, 0, 0.08)';">
        <i class="bi bi-person-lines-fill" style="font-size: 2rem; color: #2e7d32; margin-bottom: 10px;"></i>
        <div class="number" style="font-size: 1.8rem; font-weight: 600;">{{ total_faculty }}</div>
        <div style="font-size: 1.1rem; color: #333;">Faculty Members</div>
      </div>
    </div>
  </div>
</div>


  <!-- Manage Users -->
<div class="table-container" style="
  background: #fafbfd;
  border-radius: 35px;  /* more round */
  padding: 25px;
  margin-top: 30px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.08);
">
  <h4><i class="bi bi-people"></i> Manage Users</h4>

  <div style="overflow-x: auto; border-radius: 25px;"> 
    <table class="table table-hover table-bordered" style="
      background: #fff;
      border-radius: 25px;   /* more rounded table edges */
      overflow: hidden;
      box-shadow: 0 4px 15px rgba(0,0,0,0.06);
    ">
      <thead style="
        background: linear-gradient(135deg, #b3e5fc 0%, #a7ffeb 100%);
        color: #004d40;
      ">
        <tr>
          <th>Username</th>
          <th>Email</th>
          <th>Role</th>
          <th>Department</th>
          <th style="width:180px;">Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for user_item in users %}
        <tr style="border-radius: 15px;">
          <td><strong>{{ user_item.username }}</strong></td>
          <td>{{ user_item.email }}</td>
          <td><span class="badge bg-info" style="border-radius: 12px;">{{ user_item.role }}</span></td>
          <td>{{ user_item.department|default:"N/A" }}</td>
          <td>
            <a href="{% url 'edit_user' user_item.pk %}" class="btn btn-info btn-sm me-1" style="border-radius: 10px;">
              <i class="bi bi-pencil"></i> Edit
            </a>
            <a href="{% url 'delete_user' user_item.pk %}" class="btn btn-danger btn-sm" 
               style="border-radius: 10px;"
               onclick="return confirm('Delete this user?')">
              <i class="bi bi-trash"></i>
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>


 <!-- Manage Events -->
<div class="table-container" style="
  background: #fafbfd;
  border-radius: 22px;   /* slightly rounder container */
  padding: 25px;
  margin-top: 30px;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
">
  <h4><i class="bi bi-calendar-event"></i> Manage Events/Papers</h4>
  
  <a href="{% url 'event_create' %}" class="btn btn-success mb-3" style="border-radius: 10px;">
    <i class="bi bi-plus-lg"></i> Create New Event
  </a>

  <div style="overflow-x: auto; border-radius: 16px;">
    <table class="table table-hover table-bordered" style="
      background: #fff;
      border-radius: 16px;   /* slightly rounded table edges */
      overflow: hidden;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.06);
    ">
      <thead style="
        background: linear-gradient(135deg, #b3e5fc 0%, #a7ffeb 100%);
        color: #004d40;
      ">
        <tr>
          <th>Title</th>
          <th>Date</th>
          <th>Type</th>
          <th>Venue</th>
          <th style="width:180px;">Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for event in events %}
        <tr style="border-radius: 12px;">
          <td><strong>{{ event.title }}</strong></td>
          <td>{{ event.date }}</td>
          <td><span class="badge bg-primary" style="border-radius: 10px;">{{ event.event_type }}</span></td>
          <td>{{ event.venue }}</td>
          <td>
            <a href="{% url 'event_edit' event.pk %}" class="btn btn-info btn-sm me-1" style="border-radius: 8px;">
              <i class="bi bi-pencil-square"></i>
            </a>
            <a href="{% url 'event_delete' event.pk %}" class="btn btn-danger btn-sm"
               style="border-radius: 8px;"
               onclick="return confirm('Delete this event?')">
              <i class="bi bi-trash"></i>
            </a>
          </td>
        </tr>
        {% empty %}
        <tr><td colspan="5" class="text-center text-muted">No events yet</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>


  <!-- Manage Notifications -->
<div class="table-container" style="
  background: #fafbfd;
  border-radius: 22px;   /* slightly rounder container */
  padding: 25px;
  margin-top: 30px;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
">
  <h4><i class="bi bi-bell"></i> Manage Notifications</h4>

  <a href="{% url 'notification_create' %}" class="btn btn-success mb-3" style="border-radius: 10px;">
    <i class="bi bi-plus-lg"></i> Create Notification
  </a>

  <div style="overflow-x: auto; border-radius: 16px;">
    <table class="table table-hover table-bordered" style="
      background: #fff;
      border-radius: 16px;   /* slightly rounded table edges */
      overflow: hidden;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.06);
    ">
      <thead style="
        background: linear-gradient(135deg, #ffe0b2 0%, #fff9c4 100%);
        color: #4e342e;
      ">
        <tr>
          <th>Title</th>
          <th>Message</th>
          <th>Target</th>
          <th>Date</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        {% for note in notifications %}
        <tr style="height: 55px;">
          <td><strong>{{ note.title }}</strong></td>
          <td>{{ note.message|truncatewords:12 }}</td>
          <td><span class="badge bg-secondary" style="border-radius: 10px;">{{ note.get_target_role_display }}</span></td>
          <td>{{ note.created_at|date:"M d, Y" }}</td>
          <td>
            {% if note.is_active %}
              <span class="badge bg-success" style="border-radius: 10px;">Active</span>
            {% else %}
              <span class="badge bg-secondary" style="border-radius: 10px;">Inactive</span>
            {% endif %}
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="5" class="text-center text-muted">No notifications yet</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

{% endblock %}
